let isLead=0;function startGameMulti(e,t,n){let o=document.getElementById("game");o.classList.toggle("gone",!1),isLead=e?1:0,e&&(gameState.turn=1,gameState.initTime=+new Date,t(gameState),updateBoard())}function msgGame(e){}function endGame(){}function updateBoard(){}function startGame(){grid_c=e=>{console.log("Grid element "+e)};ge_gone("game",!1);new Array(99).fill(0).map((e,t)=>{let n=clone("gamebrd","tile");((e,t)=>{let n=t%9,o=Math.floor(t/9);9==o&&(n=-1.5),10==o&&(n=9.5),9<=o&&(o=t%9*1.2+.3),e.style.left=100*n/9+"%",e.style.top=100*o/9+"%",e.style.width=e.style.height=100/9+"%"})(n,t),((e,t)=>{for(i=0;i<5;i+=1)t&1<<i&&e.classList.add("l"+i);e.classList.toggle("p1",t%3==1),e.classList.toggle("p2",t%3==2)})(n,t%32),n.onclick=()=>grid_c(t)});setTimeout(()=>gecl("gamebrd","p2",!0),2e3),setTimeout(()=>gecl("gamebrd","p2",!1),4e3)}function _init_lobby(){let n=io({upgrade:!1,transports:["websocket"]}),t=document.getElementById("board");ge("nick").value="user"+ +new Date%1e4,n.on("connect",()=>{}),n.on("lobby",e=>{t.innerHTML="",e.available.forEach(t=>{if(t.nick!=ge("nick").value){let e=clone("board","brde");e.textContent="Start Game with: "+t.nick+" - ["+t.level+"]",e.onclick=()=>{n.emit("reqstart",{opponent:t.id})}}})}),n.on("disconnect",()=>{}),n.on("playstart",e=>{ge_gone("lobby",!0),startGame(e.lead,e=>{n.emit("gamemsg",e)},e=>{n.emit("reqend")})}),n.on("playend",()=>{ge_gone("lobby",!1),endGame()}),n.on("gamemsg",e=>{msgGame(e)}),n.on("error",()=>{}),geclk("enter",()=>{n.emit("el",{nick:ge("nick").value,level:ge("lev").value}),ge_no("top",!0),ge_no("bot",!1)}),geclk("leave",()=>{n.emit("ll",{}),ge_no("top",!1),ge_no("bot",!0)})}var _lobby_up=!1;function start_lobby(){_lobby_up||_init_lobby(),_lobby_up=!0,ge_gone("lobby",!1)}function init(){startGame()}let ge=e=>document.getElementById(e),gecl=(e,t,n)=>ge(e).classList.toggle(t,n),geclk=(e,t)=>ge(e).onclick=t,ge_gone=(e,t)=>gecl(e,"gone",t),ge_no=(e,t)=>gecl(e,"no",t),clone=(e,t)=>{t=document.querySelector("#"+t).content.firstElementChild.cloneNode(!0);return ge(e).appendChild(t),t};